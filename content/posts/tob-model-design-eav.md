+++
title = 'ToB 业务 | 模型设计之 EAV'
date = 2023-11-22T14:36:36+08:00
slug = 'tob-bz-model-eav'
draft = false
tags = ["ToB"]

+++

EAV是英文Entity实体、Attribute属性和Value值的首字母缩写。

## 稀疏的属性（Sparseness of Attributes）
在数学和计算机科学中，如果一个对象仅包含大量潜在属性中的几个属性，称之为“稀疏矩阵”。在讨论EAV模型时，采用“稀疏”来描述大多数无值的属性。

为说明这一点，来看看超市的收据，超市中有成千上万的库存产品，每日引入新的产品，其它则停止销售。客户购买5个产品的收据只列出实际购买的详细项目，每行一种产品。该收据并没有列出客户可能购买的每一种产品，所以说客户的收据是稀疏的。

按照数据库的术语实体是销售发票，包含如交易ID、日期和时间、存放位置等信息，收据中的每一行对应销售表中的一行记录，存有一个属性及一个或多个值。在这种情况下，属性之一是客户所购买的产品，值则为的数量、单价、折扣和总价。

上面的例子说明了属性的稀疏性（一个客户只选购一个可能的产品），引入一个新的术语：行建模（row modelling）。基于行模型的表，其描述实体的数据记录为多行，每组新的数据在数据库中存为额外的行而非额外的列。行模型是数据库设计时的标准数据建模技术,它仅适用于满足如下两个条件的情况：

特定实体的数据是稀疏的。
数据时易变的。
行建模是不适用于稀疏且数据非波动的情形，此时，应采用传统的列模型。
